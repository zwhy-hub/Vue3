{
  "version": 3,
  "sources": ["../src/effect.ts", "../src/ref.ts"],
  "sourcesContent": ["//\u7528\u6765\u4FDD\u5B58\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684effect\u51FD\u6570\r\nexport let activeSub\r\n\r\nexport function effect(fn) {\r\n  activeSub = fn\r\n  activeSub()\r\n  activeSub = null\r\n}\r\n", "import { activeSub } from './effect'\r\n\r\nenum ReactiveFlags {\r\n  IS_REF = '__v_isRef',\r\n}\r\n/**\r\n * Ref \u5F97\u7C7B\r\n */\r\nclass RefImpl {\r\n  //\u4FDD\u5B58\u5B9E\u9645\u7684\u503C\r\n  _value;\r\n  //ref\u6807\u8BB0 \u8BC1\u660E\u662F\u4E00\u4E2Aref\r\n  [ReactiveFlags.IS_REF] = true\r\n\r\n  //\u4FDD\u5B58\u548Ceffect \u4E4B\u95F4\u7684\u5173\u8054\u5173\u7CFB\r\n  subs\r\n\r\n  constructor(value) {\r\n    this._value = value\r\n  }\r\n\r\n  get value() {\r\n    //\u6536\u96C6\u4F9D\u8D56\r\n    // console.log('\u6536\u96C6\u4F9D\u8D56', activeSub)\r\n    if (activeSub) {\r\n      // \u5982\u679C\u6709 \u6536\u96C6\u4F9D\u8D56\r\n      this.subs = activeSub\r\n      // this.subs = this.subs || new Set()\r\n      // this.subs.add(activeSub)\r\n    }\r\n    return this._value\r\n  }\r\n\r\n  set value(newValue) {\r\n    //\u89E6\u53D1\u4F9D\u8D56\r\n    // console.log('\u89E6\u53D1\u4F9D\u8D56')\r\n    this._value = newValue\r\n    //\u901A\u77E5effect\u51FD\u6570\u6267\u884C\r\n    this.subs?.()\r\n  }\r\n}\r\n\r\nexport function ref(value) {\r\n  return new RefImpl(value)\r\n}\r\n/**\r\n * \u5224\u65AD\u662F\u4E0D\u662F\u4E00\u4E2Aref\r\n */\r\nexport function isRef(value) {\r\n  return !!(value && value[ReactiveFlags.IS_REF])\r\n}\r\n"],
  "mappings": ";AACO,IAAI;AAEJ,SAAS,OAAO,IAAI;AACzB,cAAY;AACZ,YAAU;AACV,cAAY;AACd;;;ACCA,IAAM,UAAN,MAAc;AAAA;AAAA,EAEZ;AAAA;AAAA,EAEA,CAAC,wBAAoB,IAAI;AAAA;AAAA,EAGzB;AAAA,EAEA,YAAY,OAAO;AACjB,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,IAAI,QAAQ;AAGV,QAAI,WAAW;AAEb,WAAK,OAAO;AAAA,IAGd;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,MAAM,UAAU;AAGlB,SAAK,SAAS;AAEd,SAAK,OAAO;AAAA,EACd;AACF;AAEO,SAAS,IAAI,OAAO;AACzB,SAAO,IAAI,QAAQ,KAAK;AAC1B;AAIO,SAAS,MAAM,OAAO;AAC3B,SAAO,CAAC,EAAE,SAAS,MAAM,wBAAoB;AAC/C;",
  "names": []
}
